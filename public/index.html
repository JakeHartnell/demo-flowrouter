<head>
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">

    <title>MWC FlowRouter Demo</title>

    <script src="/bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>

 
</head>
<body>
<mwc-layout id="demo-landing"><div region="main"></div></mwc-layout>
<mwc-layout id="demo-edit">
  <div region="main"></div>
  <div style="position:fixed;bottom:0px;background:#eee;width:100%;height:padding:15px 40%">
  Footer Contents here
  </div>
</mwc-layout>
<dom-module id="mwc-layout">

    <style>
    :host {
        display: none!important;
    }
    
    :host([active]) {
        display: block!important;
    }
    </style>

    <template>
        <content class="mwc-layout" select="*"></content>
    </template>

    <script>
    // HTMLImports.whenReady(function() {
    Polymer({

        is: "mwc-layout",

        observers: [
            "optRegionChange(opt.region.*)"
        ],

        optRegionChange: function(change) {
            var region = Object.keys(change.value);

            for (var A = 0; A < region.length; A++) {
                if (typeof(change.value[region[A]]) === "object") {
                    var element = this.querySelectorAll('*[region="' + region[A] + '"]');

                    for (Z = 0; Z < element.length; Z++) {
                        element[Z].innerHTML = "";

                        Polymer.dom(element[Z]).appendChild(change.value[region[A]]);
                    }
                } else {
                    if (document.createElement(change.value[region[A]]).constructor !== HTMLElement) {
                        var element = this.querySelectorAll('*[region="' + region[A] + '"]');

                        for (Z = 0; Z < element.length; Z++) {
                            element[Z].innerHTML = "";

                            Polymer.dom(element[Z]).appendChild(document.createElement(change.value[region[A]]));
                        }
                    } else {
                        console.log(change.value[region[A]] + " not registered");
                    }
                }
            }
        },

        properties: {
            active: {
                notify: true,
                reflectToAttribute: true,
                type: Boolean,
                value: false
            },
            opt: {
                type: Object
            }
        },

        render: function(opt) {
            this.opt = opt;
        },

        rerender: function(region) {
            for (var A = 0; A < region.length; A++) {
                var element = this.querySelectorAll('*[region="' + region[A] + '"]');

                for (Z = 0; Z < element.length; Z++) {
                    Polymer.dom(element[Z]).firstChild.fire("rerender", {
                        region: region[A]
                    });
                }
            }
        }

    });
    // });
    </script>

</dom-module>

</body>
